<section class="cars">
  <h2>Mes voitures</h2>
  <div class="cars-list">
    @for (car of cars(); track car.id) {
      <article class="car-card">
        <img [src]="car.photo_url" [alt]="car.brand + ' ' + car.model" />
        <div>
          <h3>{{ car.brand }} {{ car.model }}</h3>
          <p>Prix par jour : {{ car.daily_price }} â‚¬</p>
          <p>Disponible : {{ car.is_available ? 'Oui' : 'Non' }}</p>
        </div>
        <div class="card-actions">
          <button
            type="button"
            [routerLink]="['/car/add']"
            [queryParams]="{ edit: car.id }"
          >
            Modifier
          </button>
          <button type="button" (click)="toggleAvailability(car)">
            {{ car.is_available ? 'Mettre indisponible' : 'Rendre disponible' }}
          </button>
          <button type="button" class="danger" (click)="askDeletion(car)">Supprimer</button>
        </div>
      </article>
    }
  </div>
  <div class="add-car-btn">
    <button type="button" routerLink="/car/add">Ajouter une voiture</button>
  </div>

  @if (carPendingDeletion()) {
    <div class="confirm-overlay">
      <div class="confirm-card">
        <h3>Supprimer cette voiture ?</h3>
        <p>
          Vous allez supprimer
          <strong>
            {{ carPendingDeletion()?.brand }} {{ carPendingDeletion()?.model }}
          </strong>
        </p>
        <div class="confirm-actions">
          <button type="button" class="secondary" (click)="cancelDeletion()">Annuler</button>
          <button type="button" class="danger" (click)="confirmDeletion()">Supprimer</button>
        </div>
      </div>
    </div>
  }
</section>
